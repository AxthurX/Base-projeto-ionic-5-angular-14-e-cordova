<ion-header class="osahan-nav">
  <ion-toolbar>
    <ion-buttons slot="start">
      <app-btn-voltar #btnVoltar [fechar_modal]="true"></app-btn-voltar>
    </ion-buttons>
    <ion-title>
    </ion-title>
  </ion-toolbar>
</ion-header>
<ion-content class="ion-padding" color="light">
  <div class="mywallet text-center">
    <ion-icon slot="icon-only" name="wallet"></ion-icon>
    <p>{{produtos.length}} conta(s) em aberto</p>
    <h1>R$ {{total_aberto | number: '1.2-2'}}</h1>

    <ion-segment mode="ios" [value]="abaSelecionada" (ionChange)="segmentChanged($event)">
      <ion-segment-button value="produtos" *ngIf="produtos.length > 0">
        <ion-label>produtos em aberto</ion-label>
      </ion-segment-button>
      <ion-segment-button value="dados">
        <ion-label>Dados do cliente</ion-label>
      </ion-segment-button>
    </ion-segment>
  </div>
  <app-consultando *ngIf="consultando"></app-consultando>

  <ion-card *ngIf="abaSelecionada === 'produtos'" class="about-card ion-padding p-0">
    <ng-container *ngFor="let conta of produtos">
      <div [class.border-bottom]="!conta.detalhar" class="border-bottom d-flex align-items-center p-3"
        (click)="conta.detalhar = !conta.detalhar">
        <p class="m-0">{{conta.descricao}}</p>
      </div>
      <div class="border-bottom order-item-card mb-1" *ngIf="conta.detalhar" (click)="conta.detalhar = !conta.detalhar">
        <div class="p-3">
          <div class="d-flex justify-content-between mb-1">
            <small class="text-secondary">Conta NÂº {{conta.id}} Parcela</small>
          </div>
          <div class="d-flex justify-content-between mb-1 negrito">
            <small class="negrito">Valor total</small>
            <small class="negrito">R$ {{conta.valor_total | number: '1.2-2'}}</small>
          </div>
        </div>
      </div>
    </ng-container>
  </ion-card>
</ion-content>
