<ion-header class="osahan-nav">
  <ion-toolbar>
    <ion-buttons slot="start">
      <app-btn-voltar #btnVoltar [fechar_modal]="true"></app-btn-voltar>
    </ion-buttons>
    <ion-title>{{getNomeCliente()}}
    </ion-title>
  </ion-toolbar>
</ion-header>
<ion-content class="ion-padding" color="light">
  <div class="mywallet text-center">
    <ion-icon slot="icon-only" name="wallet"></ion-icon>
    <p>{{produtos.length}} conta(s) em aberto</p>
    <h1>R$ {{total_aberto | number: '1.2-2'}}</h1>

    <ion-segment mode="ios" [value]="abaSelecionada" (ionChange)="segmentChanged($event)">
      <ion-segment-button value="produtos" *ngIf="produtos.length > 0">
        <ion-label>produtos em aberto</ion-label>
      </ion-segment-button>
      <ion-segment-button value="dados">
        <ion-label>Dados do cliente</ion-label>
      </ion-segment-button>
    </ion-segment>
  </div>
  <app-consultando *ngIf="consultando"></app-consultando>

  <ion-card *ngIf="abaSelecionada === 'produtos'" class="about-card ion-padding p-0">
    <!-- <ng-container *ngFor="let conta of produtos">
      <div [class.border-bottom]="!conta.detalhar" class="border-bottom d-flex align-items-center p-3"
        (click)="conta.detalhar = !conta.detalhar">
        <p class="m-0">{{conta.descricao}}</p>
        <p [class.text-danger]="conta.dias_atraso > 0" [class.text-success]="conta.dias_atraso <= 0"
          class="ml-auto mb-0 font-weight-bold">R${{conta.valor_total | number: '1.2-2'}}</p>
      </div>
      <div class="border-bottom order-item-card mb-1" *ngIf="conta.detalhar" (click)="conta.detalhar = !conta.detalhar">
        <div class="p-3">
          <div class="d-flex justify-content-between mb-1">
            <small class="text-secondary">Conta Nº {{conta.id}} Parcela</small>
            <small class="text-secondary">{{conta.parcela_numero}}/{{conta.parcela_quantidade}}</small>
          </div>
          <div class="d-flex justify-content-between mb-1">
            <small class="text-secondary">Valor do documento</small>
            <small class="text-secondary">R$ {{conta.valor_documento | number: '1.2-2'}}</small>
          </div>
          <div class="d-flex justify-content-between mb-1">
            <small [ngClass]="{'text-secondary': conta.dias_atraso <= 0, 'text-danger' : conta.dias_atraso > 0}">Data
              vencimento</small>
            <small
              [ngClass]="{'text-secondary': conta.dias_atraso <= 0, 'text-danger' : conta.dias_atraso > 0}">{{conta.data_vencimento_long | date: 'dd/MM/yyyy'}}</small>
          </div>
          <div *ngIf="conta.dias_atraso > 0" class="d-flex justify-content-between mb-1">
            <small class="text-danger">Dias em atraso</small>
            <small class="text-danger">{{conta.dias_atraso}}</small>
          </div>
          <div *ngIf="conta.valor_multa > 0" class="d-flex justify-content-between mb-1">
            <small class="text-danger">Multa ({{multa | number: '1.0-2'}}%)</small>
            <small class="text-danger">R$ {{conta.valor_multa | number: '1.2-2'}}</small>
          </div>
          <div class="d-flex justify-content-between mb-1 negrito">
            <small class="negrito">Valor total</small>
            <small class="negrito">R$ {{conta.valor_total | number: '1.2-2'}}</small>
          </div>
        </div>
      </div>
    </ng-container> -->
  </ion-card>

  <ion-card *ngIf="abaSelecionada === 'dados'" class="about-card ion-padding p-0">
    <div class="border-bottom p-2">
      <small class="negrito" slot="stacked">Razão</small>
      <p class="m-0">{{cliente.razao}}</p>
    </div>
    <div *ngIf="cliente.fantasia" class="border-bottom p-2">
      <small class="negrito" slot="stacked">Fantasia</small>
      <p class="m-0">{{cliente.fantasia}}</p>
    </div>
    <div *ngIf="cliente.cpf_cnpj" class="border-bottom p-2">
      <small class="negrito" slot="stacked">CPF/CNPJ</small>
      <p class="m-0">{{cliente.cpf_cnpj | mask: 'CPF_CNPJ'}}</p>
    </div>
    <div *ngIf="cliente.telefone_whatsapp" class="border-bottom p-2">
      <small class="negrito" slot="stacked">Telefone: Whats App</small>
      <p class="m-0">{{cliente.telefone_whatsapp | mask: "(00) 0000-0000||(00) 0 0000-0000"}}</p>
    </div>
    <div *ngIf="cliente.telefone_principal" class="border-bottom p-2">
      <small class="negrito" slot="stacked">Telefone: Principal</small>
      <p class="m-0">{{cliente.telefone_principal | mask: "(00) 0000-0000||(00) 0 0000-0000"}}</p>
    </div>
    <div *ngIf="cliente.cep" class="border-bottom p-2">
      <small class="negrito" slot="stacked">CEP</small>
      <p class="m-0">{{cliente.cep | mask: "00000-000"}}</p>
    </div>
    <div *ngIf="cliente.logradouro" class="border-bottom p-2">
      <small class="negrito" slot="stacked">Logradouro</small>
      <p class="m-0">{{cliente.logradouro}} {{cliente.numero}}</p>
    </div>
    <div *ngIf="cliente.complemento" class="border-bottom p-2">
      <small class="negrito" slot="stacked">Complemento</small>
      <p class="m-0">{{cliente.complemento}}</p>
    </div>
    <div *ngIf="cliente.bairro" class="border-bottom p-2">
      <small class="negrito" slot="stacked">Bairro</small>
      <p class="m-0">{{cliente.bairro}}</p>
    </div>
    <div class="border-bottom p-2">
      <small class="negrito" slot="stacked">Município/UF</small>
      <p class="m-0">{{cliente.municipio}}/{{cliente.sigla_uf}}</p>
    </div>
  </ion-card>
</ion-content>
